<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <div class="todo">
            <h3>할일목록</h3>
            <ul class="list"></ul>
            <input type="text" class="desc" />
            <button onclick="onAdd()">추가</button>
            <button onclick="onSaveToServer()">서버에 저장</button>
        </div>

        <script>
            let currentId = 1;
            const todoList = [];

            function applyTodoDate(data) {
                //수정, 삭제, 추가
            }

            function applyFriendDate(data) {
                //수정, 삭제, 추가
            }

            function onAdd() {
                const descEl = document.querySelector(".todo .desc");
                const todo = { id: currentId++, desc: descEl.value };
                todoList.push(todo);
                // const listEl = document.querySelector(".todo .list");
                // const todoEl = makeTodoElement(todo);
                // listEl.appendChild(todoEl);
                applyTodoDate(todoList);
            }

            function makeTodoElement(todo) {
                const todoEl = document.createElement("li");
                const spanEl = document.createElement("span");
                const buttonEl = document.createElement("button");
                spanEl.innerHTML = todo.desc;
                buttonEl.innerHTML = "삭제";
                buttonEl.dataset.id = todo.id;
                buttonEl.onclick = onDelete;
                todoEl.appendChild(spanEl);
                todoEl.appendChild(buttonEl);
                return todoEl;
            }

            function onDelete(e) {
                const id = Number(e.target.dataset.id);
                const index = todoList.findIndex((item) => item.id === id);
                if (index >= 0) {
                    const listEl = document.querySelector(".todo .list");
                    const todoEl = e.target.parentNode;
                    // listEl.removeChild(todoEl);
                    applyTodoDate(todoList);
                }
            }

            function onSaveToServer() {
                //todoList를 서버로 전송한다
            }
        </script>

        <script>
            import React, { useState } from "react";
            export default function App() {
                const [todoList, setTodoList] = useState([]);
                const [currentId, setCurrentId] = useState(1);
                const [desc, setDesc] = useState("");
                const [showOdd, setShowOdd] = useState(false);

                function onAdd() {
                    const todo = { id: currentId, desc };
                    setCurrentId(currentId + 1);
                    setTodoList([...todoList, todo]);
                }
                function onDelete() {
                    const id = Number(e.target.dataset.id);
                    const newTodoList = todoList.filter((todo) => todo.id !== id);
                    setTodoList(newTodoList);
                }
                function onSaveToServer() {}
                return (
                    <div>
                        <h3>할일목록</h3>
                        <ul class="list">
                            {todoList
                                .filter((_, index) => (showOdd ? index % 2 === 0 : true))
                                .map((todo) => (
                                    <li key={todo.id}>
                                        <span>{todo.desc}</span>
                                        <button data-id={todo.id} onClick={onDelete}></button>
                                    </li>
                                ))}
                        </ul>
                        <input type="text" value={""} onChange={(e) => setDesc(e.target.value)} />
                        <button onClick={onAdd}>추가</button>
                        <button onClick={() => showOdd(!showOdd)}>홀수 아이템만 보고 on/off</button>
                        <button onClick={() => onSaveToServer(show)}>서버에 저장</button>
                    </div>
                );
            }
        </script>
    </body>
</html>
